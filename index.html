<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Crispy Chicken HR System</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body{font-family:TahomĞ°,Arial;background:#f4f6f8;margin:0;padding:15px}
.header{
display:flex;align-items:center;gap:15px;
background:#b30000;color:#fff;padding:15px;border-radius:10px
}
.header img{height:70px;background:#fff;padding:5px;border-radius:10px}
.section{
background:#fff;padding:15px;margin-top:15px;border-radius:10px;
box-shadow:0 2px 5px rgba(0,0,0,.15)
}
h3{margin-top:0;color:#b30000}
input,select{width:100%;padding:6px;margin:4px 0}
button{
background:#b30000;color:#fff;border:none;
padding:7px 14px;border-radius:6px;cursor:pointer
}
table{width:100%;border-collapse:collapse;margin-top:10px}
th,td{border:1px solid #ccc;padding:6px;text-align:center}
th{background:#eee}
.progress{height:18px;background:#ddd;border-radius:10px;overflow:hidden}
.progress-bar{height:100%;background:green;width:0%}
.alert{color:red;font-weight:bold}
.lang-btn{float:left;background:#333}
.card{display:inline-block;background:#eee;padding:10px;margin:5px;border-radius:8px}
.hide{display:none}
</style>
</head>

<body>

<div class="header">
<img src="logo.png">
<div>
<h2 id="t1">Crispy Chicken â€“ HR System</h2>
<p id="t2">Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø´Ø¤ÙˆÙ† Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</p>
</div>
<button class="lang-btn" onclick="toggleLang()">EN / AR</button>
</div>

<!-- ADD EMPLOYEE -->
<div class="section">
<h3 id="t3">Ø¥Ø¶Ø§ÙØ© Ù…ÙˆØ¸Ù</h3>
<input id="name" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ¸Ù">
<input id="position" placeholder="Ø§Ù„ÙˆØ¸ÙŠÙØ©">
<input id="branch" placeholder="Ø§Ù„ÙØ±Ø¹">
<label id="t4">Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø¥Ù‚Ø§Ù…Ø©</label>
<input type="date" id="visa">
<button onclick="addEmployee()">Ø­ÙØ¸</button>
</div>

<!-- EMPLOYEE LIST -->
<div class="section">
<h3 id="t5">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</h3>
<select id="empList" onchange="loadEmployee()"></select>
</div>

<!-- ONBOARDING -->
<div class="section">
<h3 id="t6">On-Boarding Checklist</h3>
<table>
<tr><th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡</th><th>âœ”</th></tr>
<tr><td>Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø¬ÙˆØ§Ø²</td><td><input type="checkbox" class="chk"></td></tr>
<tr><td>Ø§Ù„Ø¹Ù‚Ø¯</td><td><input type="checkbox" class="chk"></td></tr>
<tr><td>Ø§Ù„ÙØ­Øµ Ø§Ù„Ø·Ø¨ÙŠ</td><td><input type="checkbox" class="chk"></td></tr>
<tr><td>Ø§Ù„Ø¥Ù‚Ø§Ù…Ø©</td><td><input type="checkbox" class="chk"></td></tr>
<tr><td>Ø§Ù„ØªØ¯Ø±ÙŠØ¨</td><td><input type="checkbox" class="chk"></td></tr>
</table>

<div class="progress"><div class="progress-bar" id="bar"></div></div>
<p id="percent">0%</p>

<button onclick="exportPDF()">PDF</button>
<button onclick="sendEmail()">ğŸ“§ Email HR</button>
</div>

<!-- DASHBOARD -->
<div class="section">
<h3 id="t7">Dashboard</h3>
<div class="card">ğŸ‘¥ <span id="totalEmp">0</span></div>
<div class="card">â³ <span id="pending">0</span></div>
<div class="card alert" id="visaAlert"></div>
</div>

<script>
let lang="ar";
let employees=JSON.parse(localStorage.getItem("emps")||"[]");
let current=0;

function saveAll(){localStorage.setItem("emps",JSON.stringify(employees));}

function addEmployee(){
employees.push({
name:name.value,position:position.value,branch:branch.value,visa:visa.value,checks:[]
});
saveAll();loadList();
}

function loadList(){
empList.innerHTML="";
employees.forEach((e,i)=>{
let o=document.createElement("option");
o.value=i;o.textContent=e.name;empList.appendChild(o);
});
totalEmp.textContent=employees.length;
loadEmployee();
}

function loadEmployee(){
current=empList.value||0;
let e=employees[current];if(!e)return;
name.value=e.name;position.value=e.position;branch.value=e.branch;visa.value=e.visa;
document.querySelectorAll(".chk").forEach((c,i)=>c.checked=e.checks[i]||false);
calc();
checkVisa();
}

document.querySelectorAll(".chk").forEach((c,i)=>{
c.onchange=()=>{
employees[current].checks[i]=c.checked;
saveAll();calc();
}
});

function calc(){
let c=document.querySelectorAll(".chk");
let d=[...c].filter(x=>x.checked).length;
let p=Math.round(d/c.length*100);
bar.style.width=p+"%";percent.textContent=p+"%";
pending.textContent=employees.filter(e=>(e.checks||[]).length<5).length;
}

function checkVisa(){
visaAlert.textContent="";
let e=employees[current];
if(e.visa){
let days=(new Date(e.visa)-new Date())/86400000;
if(days<30) visaAlert.textContent="âš  Ø¥Ù‚Ø§Ù…Ø© Ù‚Ø±ÙŠØ¨Ø© Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡";
}
}

function exportPDF(){
const {jsPDF}=window.jspdf;
let pdf=new jsPDF();
pdf.addImage("logo.png","PNG",80,5,50,40);
pdf.text("Crispy Chicken â€“ Onboarding",10,60);
pdf.text("Employee: "+name.value,10,70);
pdf.text("Completion: "+percent.textContent,10,80);
pdf.save(name.value+"_Onboarding.pdf");
}

function sendEmail(){
window.location="mailto:hr@crispychicken.com?subject=Onboarding Alert&body=Employee: "+name.value;
}

function toggleLang(){
if(lang==="ar"){
document.documentElement.dir="ltr";
t1.textContent="Crispy Chicken â€“ HR System";
t2.textContent="Human Resources Management";
t3.textContent="Add Employee";
t5.textContent="Employee List";
t7.textContent="Dashboard";
lang="en";
}else location.reload();
}

loadList();
</script>

</body>
</html>
